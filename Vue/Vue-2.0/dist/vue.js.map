{"version":3,"file":"vue.js","sources":["../src/compiler/parse.js","../src/compiler/index.js","../src/vdom/index.js","../src/lifecycle.js","../src/observe/array.js","../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["/**\r\n * 1.通过遍历html字符串利用正则匹配开始、文本、结束标签\r\n * 2.每匹配一个字符串就将解析的结果通过ast处理函数处理为ast树形结构\r\n * 3.每解析完一个标签，在html字符串中删除\r\n * 4.ast属性结构的函数处理\r\n *    通过栈的方式储存父节点，父节点始终在栈的最底层\r\n */\r\n\r\n const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\r\n const qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\r\n //匹配的分组时标签名\r\n const startTagopen = new RegExp(`^<${qnameCapture}`);\r\n //结束标签</XXX>\r\n const endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\r\n //第一组匹配key value匹配 分组3、4、5\r\n const attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\r\n const startTagclose = /^\\s*(\\/?)>/;\r\n\r\n \r\n // 边解析边删除已解析的模板\r\n export function parseHTML(html) {\r\n   const ELEMENT_TYPE = 1;\r\n   const TEXT_TYPE = 3;\r\n   const stack = []; //用来放元素\r\n   let currentParent; // 指向栈中的最后一个\r\n   let root;\r\n \r\n   // 其中的一个节点\r\n   function createASTElement(tag, attrs) {\r\n     return {\r\n       tag,\r\n       type: ELEMENT_TYPE,\r\n       children: [],\r\n       attrs,\r\n       parent: null,\r\n     };\r\n   }\r\n \r\n   // 最终转换为抽象语法树\r\n   function start(tag, attrs) {\r\n     let node = createASTElement(tag, attrs);\r\n     if (!root) {\r\n       //判断是否为根节点\r\n       root = node;\r\n     }\r\n     if (currentParent) {\r\n       // 储存当前节点的父元素，并将节点push进父元素的子栈\r\n       node.parent = currentParent;\r\n       currentParent.children.push(node);\r\n     }\r\n     stack.push(node);\r\n     currentParent = node; // 栈中的最后一个\r\n   }\r\n   function chars(text) {\r\n     text = text.replace(/\\s/g, \"\");\r\n     text &&\r\n       currentParent.children.push({\r\n         type: TEXT_TYPE,\r\n         text,\r\n         parent: currentParent,\r\n       });\r\n   }\r\n   function end() {\r\n     stack.pop();\r\n     currentParent = stack[stack.length - 1];\r\n   }\r\n   // 一边解析一边删除已经解析过的html字符串\r\n   function advance(n) {\r\n     html = html.substring(n);\r\n   }\r\n   // 解析开始标签\r\n   function parseStartTag() {\r\n     const start = html.match(startTagopen);\r\n     if (start) {\r\n       const match = {\r\n         tagName: start[1],\r\n         attrs: [], //标签属性\r\n       };\r\n       advance(start[0].length);\r\n \r\n       let attr, end;\r\n       // 记录属性并删除\r\n       while (\r\n         !(end = html.match(startTagclose)) &&\r\n         (attr = html.match(attribute))\r\n       ) {\r\n         advance(attr[0].length);\r\n         match.attrs.push({\r\n           name: attr[1],\r\n           value: attr[3] || attr[4] || attr[5],\r\n         });\r\n       }\r\n       if (end) {\r\n         advance(end[0].length);\r\n       }\r\n       return match;\r\n     }\r\n     return false; //不是开始标签就返回\r\n   }\r\n   // 循环解析html内容\r\n   while (html) {\r\n     // 如果 indexOf的索引是0，则说明是个开始或者结束标签\r\n     // 如果 indexOf的索引 > 0，则说明时文本的结束位置\r\n     let textEnd = html.indexOf(\"<\");\r\n     if (textEnd == 0) {\r\n       const startTagMatch = parseStartTag(); //开始标签的解析结果\r\n       if (startTagMatch) {\r\n         //解析到开始标签\r\n         start(startTagMatch.tagName, startTagMatch.attrs);\r\n         continue;\r\n       }\r\n       let endTagMatch = html.match(endTag); //结束标签；\r\n       if (endTagMatch) {\r\n         advance(endTagMatch[0].length);\r\n         end(endTagMatch[0]);\r\n         continue;\r\n       }\r\n     }\r\n     if (textEnd > 0) {\r\n       let text = html.substring(0, textEnd); //文本内容\r\n       if (text) {\r\n         chars(text);\r\n         advance(text.length); //解析到的文本\r\n       }\r\n       continue;\r\n     }\r\n   }\r\n   return root;\r\n }","import { parseHTML } from \"./parse\";\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; //匹配的 {{XXX}} 表达式\r\n\r\n// 处理dom属性\r\nfunction genProps(attrs) {\r\n  let str = \"\"; //{name, value}\r\n  for (let i = 0; i < attrs.length; i++) {\r\n    let attr = attrs[i];\r\n    if (attr.name == \"style\") {\r\n      // color: red => {color： \"red\"}\r\n      let obj = {};\r\n      attr.value.split(\";\").forEach((item) => {\r\n        let [key, value] = item.split(\":\");\r\n        obj[key] = value;\r\n      });\r\n      attr.value = obj\r\n    }\r\n\r\n    str += `${attr.name}:${JSON.stringify(attr.value)},`;\r\n  }\r\n  return `{${str.slice(0, -1)}}`;\r\n}\r\n\r\nfunction gen(node) {\r\n  if (node.type === 1) {\r\n    return codegen(node);\r\n  } else {\r\n    //文本\r\n    // 1.模板字符串 2.纯文本\r\n    let text = node.text;\r\n    if (!defaultTagRE.test(text)) {\r\n      return `_v(${JSON.stringify(text)})`;\r\n    } else {\r\n      //_v(_s(name) + 'hello' + _s(name))\r\n      let tokens = [];\r\n      let match;\r\n      let lastIndex = 0;\r\n      // exec + 全局匹配/s/g 要重置顺序\r\n      // 在全局模式下，当 exec() 找到了与表达式相匹配的文本时，在匹配后，它将把正则表达式对象的 lastIndex 属性设置为匹配文本的最后一个字符的下一个位置。这就是说，您可以通过反复调用 exec() 方法来遍历字符串中的所有匹配文本。当 exec() 再也找不到匹配的文本时，它将返回 null，并把 lastIndex 属性重置为 0。\r\n      defaultTagRE.lastIndex = 0;\r\n      while ((match = defaultTagRE.exec(text))) {\r\n        let index = match.index; //匹配的位置， 便于取两个模板字符串中间的字符串 {{name}} hello {{age}}\r\n        if (index > lastIndex) {\r\n          tokens.push(JSON.stringify(text.slice(lastIndex, index)));\r\n        }\r\n        tokens.push(`_s(${match[1].trim()})`);\r\n        lastIndex = index + match[0].length;\r\n      }\r\n      // {{a}} hello\r\n      if (lastIndex < text.length) {\r\n        tokens.push(JSON.stringify(text.slice(lastIndex)));\r\n      }\r\n      return `_v(${tokens.join(\"+\")})`;\r\n    }\r\n  }\r\n}\r\n\r\nfunction genChildren(el) {\r\n  const children = el.children;\r\n  if (children) {\r\n    return children.map((child) => gen(child)).join(\",\");\r\n  }\r\n}\r\n\r\nfunction codegen(ast) {\r\n  let children = genChildren(ast);\r\n  let code = `_c(\"${ast.tag}\",${\r\n    ast.attrs.length > 0 ? genProps(ast.attrs) : null\r\n  }${ast.children.length ? `,${children}` : \"\"}\r\n  )`;\r\n  return code;\r\n}\r\n\r\nexport function compileToFunction(template) {\r\n  // 将template 转化成ast语法树\r\n  let ast = parseHTML(template);\r\n  // 生成render方法 （render方法返回结果就是 虚拟dom)\r\n\r\n  // 模板引擎实现原理: with + new Function\r\n  let code = codegen(ast);\r\n  // with (Math) {\r\n  //   a = PI * r * r;\r\n  //   x = r * cos(PI);\r\n  //   y = r * sin(PI / 2);\r\n  // }\r\n  code = `with(this){ return ${code} }`;\r\n  let render = new Function(code);\r\n  return render;\r\n  // render () {\r\n  //   return _c(\"div\",{\r\n  //     id:\"app\"\r\n  //   },_c(\"div\",{style:\"red\"}),_v(_s(name)+hello))\r\n  // }\r\n}\r\n","export function creatElementVnode(vm, tag, props, ...children) {\r\n  if (props == null) {\r\n    props = {};\r\n  }\r\n  let key = props.key;\r\n  if (key) {\r\n    delete props.key;\r\n  }\r\n\r\n  return vnode(vm, tag, key, props, children);\r\n}\r\n\r\nexport function creatTextVNode(vm, text) {\r\n  return vnode(vm, undefined, undefined, undefined, undefined, text);\r\n}\r\n\r\n// ast 做的语法层面的转化，他描述的是语法本身（描述 js css html ）\r\n// 虚拟dom描述的是dom元素，可以增加自定义属性\r\nfunction vnode(vm, tag, key,props, children, text) {\r\n  return {\r\n    vm,\r\n    tag,\r\n    key,\r\n    props,\r\n    children,\r\n    text,\r\n  };\r\n}\r\n","import { creatElementVnode, creatTextVNode } from \"./vdom/index\";\r\n\r\nfunction createElm(vnode) {\r\n  let { tag, props, children, text } = vnode;\r\n  if (typeof tag === \"string\") {\r\n    vnode.el = document.createElement(tag); // 将真实节点与虚拟节点相对应，后续属性修改方便操作真实节点\r\n    patchProps(vnode.el, props);\r\n    children.forEach((child) => {\r\n      vnode.el.appendChild(createElm(child));\r\n    });\r\n  } else {\r\n    //文本\r\n    vnode.el = document.createTextNode(text);\r\n  }\r\n  return vnode.el;\r\n}\r\n// 更新属性\r\nfunction patchProps(el, props) {\r\n    for(let key in props){\r\n        if(key === \"style\"){\r\n            for (let styleName  in props.style){\r\n                el.style[styleName] = props.style[styleName];\r\n            }\r\n        }else{\r\n            el.setAttribute(key, props[key])\r\n        }\r\n    }\r\n}\r\nfunction patch(oldVnode, vNode) {\r\n  // 初次渲染\r\n  const isRealElement = oldVnode.nodeType; //dom属性\r\n  if (isRealElement) {\r\n    const elm = oldVnode; //获取真实元素\r\n    const parentElm = elm.parentNode; //获取父元素\r\n    let newElem = createElm(vNode); //创建真实元素\r\n    parentElm.insertBefore(newElem, elm.nextSibling); //将新的元素插入老的元素之后\r\n    parentElm.removeChild(elm); //删除老的元素\r\n    return newElem;\r\n  } else {\r\n    // diff\r\n  }\r\n}\r\n\r\nexport function initLifeCycle(Vue) {\r\n  Vue.prototype._update = function (vnode) {\r\n    //虚拟dom转化为真实Dom\r\n    const vm = this;\r\n    const el = vm.$el;\r\n    // patch 既有初始化又有更新\r\n    patch(el, vnode);\r\n  };\r\n  // _c(\"div\", {}, ...children)\r\n  Vue.prototype._c = function () {\r\n    return creatElementVnode(this, ...arguments);\r\n  };\r\n  // _v(text)\r\n  Vue.prototype._v = function () {\r\n    return creatTextVNode(this, ...arguments);\r\n  };\r\n  Vue.prototype._s = function (value) {\r\n    const str = typeof value === \"string\" ? value : JSON.stringify(value);\r\n    return str;\r\n  };\r\n  Vue.prototype._render = function () {\r\n    // 渲染的时候，去实例取值，这里就将数据与视图绑定\r\n    const vm = this;\r\n    return vm.$options.render.call(vm); // 通过ast转移后生成的render方法\r\n  };\r\n}\r\n\r\nexport function mountComponent(vm, el) {\r\n  // el 是通过css选择器获取的真实dom\r\n  vm.$el = el;\r\n\r\n  // 1. 调用 render产生虚拟节点  虚拟 DOM\r\n  vm.$el = vm._update(vm._render()); //vm.$options.render() 虚拟节点\r\n\r\n  // 2.根据虚拟DOM产生真实DOM\r\n\r\n  // 3.插入el元素中\r\n}\r\n\r\n/**\r\n * Vue 核心流程\r\n *\r\n * 1. 创造响应式数据\r\n * 2. 模板转化为ast语法树\r\n * 3. 将ast语法树转化为render函数\r\n * 4. 后续每次数据更新可以只执行render\r\n *\r\n * render函数会产生虚拟节点（通过使用响应式数据）\r\n * 根据生成的虚拟节点创造真实DOM\r\n *\r\n */\r\n","// 重写数组中方法\r\n \r\nlet oldArrayPro = Array.prototype;\r\n\r\n// newArrayProto.__proto__ = oldArrayPro 保证Array的方法不改变\r\nexport let newArrayProto = Object.create(oldArrayPro);\r\n\r\nlet methods = [ //找到所有变异方法\r\n    \"push\",\r\n    \"pop\",\r\n    \"shift\",\r\n    \"unshift\",\r\n    \"reverse\",\r\n    \"sort\",\r\n    \"splice\"\r\n]\r\n\r\nmethods.forEach( method => {\r\n    // 重写数组方法\r\n    newArrayProto[method] = function(...rest){\r\n        //通过调用老的方法  函数劫持，切片编程\r\n       const result = oldArrayPro[method].call(this, ...rest); \r\n    //    新增的数据未被劫持，数据需要再次被劫持\r\n    let inserted;\r\n    let ob = this.__ob__\r\n    switch(method){\r\n        case \"push\":\r\n        case \"unshift\":\r\n            inserted = rest;\r\n            break;\r\n        case \"splice\":\r\n            // 拿到新增的数组数据\r\n            inserted = rest.slice(2)\r\n            break\r\n            default:\r\n                break\r\n    }\r\n    // inserted 数组\r\n    if(inserted){\r\n        //如果有新增则将监听新增的对象\r\n        ob.observeArray(inserted)\r\n    } \r\n       return result;\r\n    }\r\n})","\r\n\r\nimport {newArrayProto} from \"./array\"\r\nclass Observe{\r\n    constructor(data) {\r\n        // Object.definProperty 只能劫持已经存在的属性 (vue 为此单独写api $set $delete);\r\n        // 通过注册数组的索引可以监听变化，但是挂载到实例上会导致过多的属性挂载 影响性能\r\n        // observer实例挂载到data上\r\n         // 如果属性有__ob__ 说明对象被代理过\r\n       Object.defineProperty(data, \"__ob__\", {\r\n        value: this,\r\n        enumerable: false //循环的时候不可枚举\r\n       }) \r\n        // data.__ob__ = this;  直接这样写会被一直代理至死循环\r\n        if(Array.isArray(data)){\r\n            // 监听用户对数组的操作（push shift 。。。)\r\n            // 重写数组变异方法（会改变原数组的方法）\r\n            // 方案 保留原数组特性，重写部分方法 （push shift 。。。)\r\n            data.__proto__ = newArrayProto;\r\n            this.observeArray(data);  // 可以检测到数组中的对象\r\n        }else{\r\n            this.walk(data)\r\n        }\r\n\r\n    }\r\n    walk(data) { //循环注册对象属性（依次劫持属性）\r\n        // 重新定义属性 （—性能瓶颈）\r\n        Object.keys(data).forEach(key => defineReactive(data, key, data[key]))\r\n    }\r\n    // 监测数组的对象\r\n    observeArray(data) {\r\n        // 数组项传入observe时，非对象不会被监测\r\n        data.forEach(item => { observe(item)})\r\n    }\r\n}\r\n// 将数据定义为响应式\r\nexport function defineReactive(target, key, value) { //闭包 属性劫持\r\n    observe(value);\r\n    Object.defineProperty(target, key, {\r\n        get() { \r\n            return value\r\n        },\r\n        set(newValue) {\r\n            if(newValue === value) return;\r\n            observe(newValue); //当设置将对象修改时，需要再次劫持\r\n            value =  newValue\r\n        }\r\n    })\r\n}\r\n\r\n\r\n\r\nexport function observe(data) {\r\n    // 对对象劫持\r\n\r\n    if(typeof data !== \"object\" || data == null){\r\n        return; //只劫持对象\r\n    }\r\n    // 被劫持过了，就不需要劫持 （判断对象是否被劫持，添加实例，用实例判断是否被劫持）\r\n    if(data.__ob__ instanceof Observe){\r\n        return;\r\n    }\r\n    return new Observe(data)\r\n}","import { observe } from \"./observe/index\";\r\n\r\nfunction initState(vm) {\r\n    const opts = vm.$options;\r\n    if(opts.data) {\r\n        // 初始化数据\r\n        initData(vm)\r\n    }\r\n}\r\nfunction proxy(vm, target, key) {\r\n    Object.defineProperty(vm, key,{\r\n        // 从_dataz中的数据挂在vm上\r\n        get() {\r\n            return vm[target][key];\r\n        },\r\n        set(newValue) {\r\n            return vm[target][key] = newValue;\r\n        }\r\n    })\r\n}\r\n\r\nfunction initData(vm) {\r\n    let data = vm.$options.data; //data可能是函数  可能是对象；\r\n    data = typeof data === \"function\" ? data.call(vm) : data;\r\n\r\n    //将data绑定到_data上，方便监测实例的数据改变\r\n    vm._data = data; \r\n    \r\n    // 数据劫持  用defineProperty代理data\r\n    observe(data);\r\n    // vm._data 代理到vm上 方便可以直接取值，且保持vms实例上的data响应式变化 第二次defineProperty\r\n    for(let key in data) {\r\n        proxy(vm, \"_data\", key)\r\n    }\r\n}\r\n\r\nexport { initState, initData }","import { compileToFunction } from \"./compiler/index\";\r\nimport { mountComponent } from \"./lifecycle\";\r\nimport { initState } from \"./state\";\r\n\r\n\r\nexport function initMixin(Vue) {\r\n\r\n    Vue.prototype._init = function(options){\r\n        // vue 指令 vm vm\r\n        const vm = this;\r\n        vm.$options = options;\r\n        // 初始化状态（数据）\r\n        initState(vm);\r\n        if(options.el){\r\n            vm.$mount(options.el) //数据挂载到页面模板\r\n        }\r\n    }\r\n    Vue.prototype.$mount = function(el) {\r\n        const vm = this;\r\n        el = document.querySelector(el);\r\n        let ops = vm.$options;\r\n        if(!ops.render){ //先看是否有render\r\n            let template; //是否有template,没写采用外部el的template\r\n            if(!ops.template && el){\r\n                template = el.outerHTML\r\n\r\n            }else{\r\n                if(el){\r\n                    template = ops.template; //写了template就用template\r\n                }\r\n            }\r\n            if(template){\r\n                const render = compileToFunction(template);\r\n                ops.render = render; //jsx 最终编译程 h(\"xxx\")\r\n            }\r\n        }\r\n        mountComponent(vm, el) //组件挂载 调用render\r\n        //script 标签引用的vue.gloabal.js 这个编译过程在浏览器运行\r\n        // runtime不包含模板编译，整个编译过程是打包的时候loader来转义.vue文件，用runtime时不能使用 template:\"\"\r\n\r\n    }\r\n}\r\n","\r\nimport { initMixin } from \"./init\"\r\nimport { initLifeCycle } from \"./lifecycle\"\r\n\r\nfunction Vue(options) {\r\n    this._init(options)\r\n}\r\n\r\ninitMixin(Vue); //挂载init方法\r\ninitLifeCycle(Vue);\r\n\r\nexport default Vue;"],"names":["ncname","qnameCapture","startTagopen","RegExp","endTag","attribute","startTagclose","parseHTML","html","ELEMENT_TYPE","TEXT_TYPE","stack","currentParent","root","createASTElement","tag","attrs","type","children","parent","start","node","push","chars","text","replace","end","pop","length","advance","n","substring","parseStartTag","match","tagName","attr","name","value","textEnd","indexOf","startTagMatch","endTagMatch","defaultTagRE","genProps","str","i","obj","split","forEach","item","key","JSON","stringify","slice","gen","codegen","test","tokens","lastIndex","exec","index","trim","join","genChildren","el","map","child","ast","code","compileToFunction","template","render","Function","creatElementVnode","vm","props","vnode","creatTextVNode","undefined","createElm","document","createElement","patchProps","appendChild","createTextNode","styleName","style","setAttribute","patch","oldVnode","vNode","isRealElement","nodeType","elm","parentElm","parentNode","newElem","insertBefore","nextSibling","removeChild","initLifeCycle","Vue","prototype","_update","$el","_c","arguments","_v","_s","_render","$options","call","mountComponent","oldArrayPro","Array","newArrayProto","Object","create","methods","method","rest","result","inserted","ob","__ob__","observeArray","Observe","data","defineProperty","enumerable","isArray","__proto__","walk","keys","defineReactive","observe","target","get","set","newValue","initState","opts","initData","proxy","_data","initMixin","_init","options","$mount","querySelector","ops","outerHTML"],"mappings":"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"}